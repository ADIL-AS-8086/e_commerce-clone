<%- include('../partials/adminHeader') %>

<div class="container mt-5" style="margin-left: 200px; width: 800px;">
    <div class="card shadow p-4 bg-white">
        <form action="/admin/editCategory/<%=categoryData._id %>" method="post" enctype="multipart/form-data">

            <!-- Display Alert Message -->
            <% if (alertMessage) { %>
                <div id="alertMessage" class="alert alert-danger" role="alert">
                    <%= alertMessage %>
                </div>

                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        // Automatically close the alert message after 5 seconds
                        setTimeout(function() {
                            var alertMessageElement = document.getElementById('alertMessage');
                            if (alertMessageElement) {
                                alertMessageElement.style.display = 'none';
                            }
                        }, 5000);
                    });
                </script>
            <% } %>

            <div class="row g-3">
                <div class="col-md-6">
                    <label for="inputEmail4" class="form-label">Category Name</label>
                    <input class="form-control"name="name" value="<%=categoryData.categoryname %>" id="inputEmail4" pattern="[a-zA-Z]+(\s*[a-zA-Z]+)*" title="Category name must be at least 2 letters and contain only letters, with no leading or trailing spaces." required>
                </div>
                <div class="col-md-6">
                    <label for="productImage1" class="form-label">Image 1</label>
                    <input type="file" class="form-control" name="image" accept="image/*" id="productImage1">
                    <div class="mt-4">
                        <img src="/uploadedImages/<%=categoryData.image %>" alt="" style="width: 50px; height: 50px" class="rounded-circle">
                    </div>
                </div>
            </div>

            <!-- Display Image Format Error -->
            <% if (imageFormatError) { %>
                <div id="imageFormatError" class="alert alert-danger mt-3" role="alert">
                    <%= imageFormatError %>
                </div>

                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        // Automatically close the image format error after 5 seconds
                        setTimeout(function() {
                            var imageFormatErrorElement = document.getElementById('imageFormatError');
                            if (imageFormatErrorElement) {
                                imageFormatErrorElement.style.display = 'none';
                            }
                        }, 5000);
                    });
                </script>
            <% } %>

            <!-- Add Category Button -->
            <div class="row mt-3">
                <div class="col-md-6">
                    <button class="btn btn-dark">Save Changes</button>
                </div>
            </div>
        </form>
    </div>
</div>

<%- include('../partials/adminFooter') %>
